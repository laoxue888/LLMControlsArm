
---

[TOC]

# å‰è¨€

![alt text](images/test.gif)

é€šè¿‡ä½¿ç”¨æ™ºèƒ½åŒ–çš„å·¥ä½œæµæ§åˆ¶ç³»ç»Ÿæ¥ç²¾ç¡®æ“æ§æœºæ¢°è‡‚ï¼Œä¸ä»…èƒ½å¤ŸåŸºäºé¢„è®¾ç®—æ³•å¯é åœ°è§„åˆ’æ¯ä¸ªåŠ¨ä½œæ­¥éª¤çš„æ‰§è¡Œé¡ºåºå’ŒåŠ›åº¦ï¼Œç¡®ä¿ä½œä¸šæµç¨‹çš„æ ‡å‡†åŒ–å’Œå¯é‡å¤æ€§ï¼Œè¿˜èƒ½é€šè¿‡æ¨¡å—åŒ–çš„ç¨‹åºè®¾è®¡æ€è·¯çµæ´»åœ°åœ¨åŸæœ‰å·¥ä½œæµä¸­æ’å…¥æ–°çš„æ§åˆ¶èŠ‚ç‚¹ï¼Œè¿™ç§å¯æ‰©å±•çš„æ¶æ„è®¾è®¡ä½¿å¾—ç³»ç»Ÿèƒ½å¤Ÿåœ¨ä¸å½±å“æ—¢æœ‰åŠŸèƒ½ç¨³å®šæ€§çš„å‰æä¸‹ï¼Œä¾¿æ·åœ°é›†æˆè¯¸å¦‚è§†è§‰è¯†åˆ«ã€åŠ›åé¦ˆè°ƒèŠ‚æˆ–ååŒä½œä¸šç­‰è¿›é˜¶åŠŸèƒ½æ¨¡å—ï¼Œä»è€ŒæŒç»­æå‡æœºæ¢°è‡‚åœ¨å¤æ‚å·¥ä¸šåœºæ™¯ä¸­çš„é€‚åº”æ€§å’Œå¤šåŠŸèƒ½æ€§ã€‚

è¿™é‡Œæˆ‘å¢åŠ äº†DeepSeekæ§åˆ¶èŠ‚ç‚¹ï¼Œé€šè¿‡ç»™DeepSeekæç¤ºï¼Œè®©å®ƒå¸®åŠ©ç»™å‡ºæœºæ¢°è‡‚çš„æœ«ç«¯ä½ç½®ã€‚è¯¥èŠ‚ç‚¹åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹å¼ºå¤§çš„é€»è¾‘æ¨ç†å’Œç©ºé—´ç†è§£èƒ½åŠ›ï¼Œèƒ½å¤Ÿå°†æ¨¡ç³Šçš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼ˆå¦‚â€œå‘å³ç§»åŠ¨5å˜ç±³â€æˆ–â€œé¿å¼€çº¢è‰²éšœç¢ç‰©â€ï¼‰è‡ªåŠ¨è½¬åŒ–ä¸ºç²¾ç¡®çš„åæ ‡å‚æ•°å’Œè¿åŠ¨è½¨è¿¹ã€‚è¿™ä¸€é›†æˆæ˜¾è‘—æå‡äº†äººæœºäº¤äº’æ•ˆç‡ï¼Œä½¿å¾—éä¸“ä¸šç”¨æˆ·ä¹Ÿèƒ½é€šè¿‡å£è¯­åŒ–æŒ‡ä»¤å¿«é€Ÿå®Œæˆå¤æ‚çš„ä½å§¿è°ƒæ•´ä»»åŠ¡ï¼Œä¸ºæŸ”æ€§ç”Ÿäº§çº¿æˆ–ç§‘ç ”å®éªŒåœºæ™¯æä¾›äº†æ›´é«˜å±‚æ¬¡çš„æ™ºèƒ½åŒ–æ”¯æŒã€‚

> å‚è€ƒï¼š
> - [JSON Output](https://api-docs.deepseek.com/zh-cn/guides/json_mode)
> - [DeepSeekæç¤ºåº“](https://api-docs.deepseek.com/zh-cn/prompt-library/)

videoï¼š[ã€æœ‰è¶£ã€‘é€šè¿‡DeepSeekå¤§è¯­è¨€æ¨¡å‹æ§åˆ¶pandaæœºæ¢°è‡‚ï¼Œå¬æ‡‚äººè¯ï¼Œæ‹Ÿäººæ€§å›ç­”ã€‚æ™ºèƒ½æœºæ¢°è‡‚åŠ©æ‰‹åˆè¿›ä¸€æ­¥å•¦](https://www.bilibili.com/video/BV15ALCzNE9S/?vd_source=3bf4271e80f39cfee030114782480463)

ã€ğŸ’•æºç è·å–æ–¹å¼åœ¨æœ€åå™¢~ğŸ’•ã€‘

# ç¯å¢ƒé…ç½®

- Ubuntu:24.04
- Ros2:jazzy


â‡ï¸ä½¿ç”¨VMWareå®‰è£…Ubuntu24.04


â‡ï¸é…ç½®å¼€å‘ç¯å¢ƒ

```shell
# VMwareçš„å¤åˆ¶ç²˜è´´é—®é¢˜ï¼šå…ˆæ‰“å¼€VMwareçš„è®¾ç½®ï¼Œç‚¹å¼€é€‰é¡¹->å¸¸è§„->å…±äº«æ–‡ä»¶å¤¹->å‹¾é€‰å¯ç”¨å…±äº«æ–‡ä»¶å¤¹

sudo apt-get autoremove open-vm-tools -y
sudo apt-get install open-vm-tools -y
sudo apt-get install open-vm-tools-desktop -y
sudo reboot


# æŒ‰ç…§é±¼é¦™rosä¸€é”®å®‰è£…ros2
sudo apt-get update
sudo apt install wget -y
wget http://fishros.com/install -O fishros && sudo bash fishros


# å®‰è£…è¿œç¨‹æ˜¾ç¤ºæœåŠ¡ç¨‹åº
sudo apt-get install x11-xserver-utils
sudo apt install libxcb* -y
sudo apt-get install x11-apps -y

# å®‰è£…moveit
# é‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯
sudo apt install ros-${ROS_DISTRO}-moveit* -y

# å®‰è£…ros2çš„æ§åˆ¶åŠŸèƒ½åŒ…
sudo apt install ros-${ROS_DISTRO}-controller-manager -y
sudo apt install ros-${ROS_DISTRO}-joint-trajectory-controller -y
sudo apt install ros-${ROS_DISTRO}-joint-state-broadcaster -y
sudo apt install ros-${ROS_DISTRO}-diff-drive-controller -y

# å®‰è£…è¿è¡Œ`graph_executer_controller`ç›¸å…³çš„PythonåŒ…
sudo apt update
sudo apt install python3-pip -y
sudo apt-get install portaudio19-dev -y
sudo apt install espeak -y

# ä½¿ç”¨æ¸…åæºä¸‹è½½
cd src/graph_executer_controller/
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple --break-system-packages

# è°ƒè¯•å·¥å…·
python3 -m pip install ipykernel -U --user --force-reinstall -i https://pypi.tuna.tsinghua.edu.cn/simple --break-system-packages


# é…ç½®Ubuntuæ”¯æŒä¸­æ–‡
sudo apt-get install language-pack-zh-hans

vim /etc/environment
# æ·»åŠ å†…å®¹
LANG="zh_CN.UTF-8"
LANGUAGE="zh_CN:zh:en_US:en"

vim /var/lib/locales/supported.d/local
# æ·»åŠ å†…å®¹
en_US.UTF-8 UTF-8
zh_CN.UTF-8 UTF-8
zh_CN.GBK GBK
zh_CN GB2312

sudo locale-gen

# å®‰è£…ä¸­æ–‡å­—ä½“
sudo apt-get install fonts-droid-fallback ttf-wqy-zenhei ttf-wqy-microhei fonts-arphic-ukai fonts-arphic-uming
```

# è¿è¡Œæµ‹è¯•

â‡ï¸ç¼–è¯‘é¡¹ç›®

```shell    
colcon build
```

â‡ï¸è¿è¡Œ`panda_moveit_config`çš„`demo.launch.py`

```shell
source install/setup.bash
ros2 launch panda_moveit_config demo.launch.py
```
å¯åŠ¨rviz2åï¼Œå¯ä»¥çœ‹åˆ°æœºæ¢°è‡‚ä¼šæœ‰å¹²æ¶‰ï¼Œç°æ‰‹åŠ¨è°ƒæ•´åˆ°ä¸å¹²æ¶‰çš„ä½ç½®ï¼Œç„¶åæ‰ä½¿ç”¨moveitpyæ§åˆ¶æœºæ¢°è‡‚ï¼Œå¦åˆ™æ— æ³•æ§åˆ¶æœºæ¢°è‡‚ã€‚

â‡ï¸è¿è¡Œ`moveitpy_controller`

```shell
# æ‰“å¼€æ–°çš„ç»ˆç«¯
source install/setup.bash
ros2 launch control_server arm_control.launch.py
```

â‡ï¸è¿è¡Œ`graph_executer_controller`

```shell
# æ‰“å¼€æ–°çš„ç»ˆç«¯
source install/setup.bash
cd src/graph_executer_controller
python3 main.py
```

# æŠ¥é”™

1. âŒæ¡†é€‰èŠ‚ç‚¹çš„æ—¶å€™æŠ¥é”™

```shell
  File "/usr/local/lib/python3.12/dist-packages/NodeGraphQt/widgets/viewer.py", line 619, in mouseMoveEvent
    self.scene().setSelectionArea(
TypeError: 'PySide6.QtWidgets.QGraphicsScene.setSelectionArea' called with wrong argument types:
  PySide6.QtWidgets.QGraphicsScene.setSelectionArea(QPainterPath, ItemSelectionMode)
Supported signatures:
  PySide6.QtWidgets.QGraphicsScene.setSelectionArea(path: PySide6.QtGui.QPainterPath, /, selectionOperation: PySide6.QtCore.Qt.ItemSelectionOperation = Instance(Qt.ReplaceSelection), mode: PySide6.QtCore.Qt.ItemSelectionMode = Instance(Qt.IntersectsItemShape), deviceTransform: PySide6.QtGui.QTransform = Default(QTransform))
  PySide6.QtWidgets.QGraphicsScene.setSelectionArea(path: PySide6.QtGui.QPainterPath, deviceTransform: PySide6.QtGui.QTransform, /)
Error calling Python override of QGraphicsView::mouseMoveEvent(): Traceback (most recent call last):
  File "/usr/local/lib/python3.12/dist-packages/NodeGraphQt/widgets/viewer.py", line 619, in mouseMoveEvent
    self.scene().setSelectionArea(
TypeError: 'PySide6.QtWidgets.QGraphicsScene.setSelectionArea' called with wrong argument types:
  PySide6.QtWidgets.QGraphicsScene.setSelectionArea(QPainterPath, ItemSelectionMode)
Supported signatures:
  PySide6.QtWidgets.QGraphicsScene.setSelectionArea(path: PySide6.QtGui.QPainterPath, /, selectionOperation: PySide6.QtCore.Qt.ItemSelectionOperation = Instance(Qt.ReplaceSelection), mode: PySide6.QtCore.Qt.ItemSelectionMode = Instance(Qt.IntersectsItemShape), deviceTransform: PySide6.QtGui.QTransform = Default(QTransform))
  PySide6.QtWidgets.QGraphicsScene.setSelectionArea(path: PySide6.QtGui.QPainterPath, deviceTransform: PySide6.QtGui.QTransform, /)
```

âœ”ï¸Pyside6å’Œnodegraphqtç‰ˆæœ¬ä¸é€‚é…å¯¼è‡´ï¼Œæ›´æ”¹`viewer.py`ä»¥ä¸‹ä½ç½®å³å¯ï¼š

```shell
# "/usr/local/lib/python3.12/dist-packages/NodeGraphQt/widgets/viewer.py"

# self.scene().setSelectionArea(
#     path, QtCore.Qt.IntersectsItemShape
# )
self.scene().setSelectionArea(
    path,
    selectionOperation=QtCore.Qt.ItemSelectionOperation.ReplaceSelection,
    mode=QtCore.Qt.ItemSelectionMode.IntersectsItemShape
)
```

â¤ï¸æºç è·å–æ–¹å¼ï¼šå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šAutoURobotï¼Œå›å¤ï¼šLLMControlsArm